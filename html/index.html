<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KD ONLINE SHOP</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Baloo+2:wght@600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#fff;color:#000;overflow-x:hidden}

/* HEADER */
header{
  position:fixed;top:0;left:0;width:100%;
  background:#000;padding:20px 20px 60px;
  text-align:center;z-index:1000
}
header h1{color:#fff;font-family:'Orbitron'}
.header-subtext{color:silver;font-family:'Baloo 2'}
.search-container{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);width:70%;max-width:350px}
.search-container input{width:100%;padding:10px;border-radius:20px;border:none}

/* PRODUCTS */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  padding:220px 30px 60px;
  max-width:1200px;margin:auto
}
.product-card{
  background:#fff;border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,.2);
  transition:.3s;position:relative
}
.product-card:hover{transform:scale(1.05)}
.product-card img{width:100%;height:200px;object-fit:cover;border-radius:10px 10px 0 0}
.product-info{text-align:center;padding:15px}
.product-price{font-weight:bold}

/* BUTTONS */
.btn-container{display:flex;justify-content:center;gap:10px;margin-top:10px}
.order-btn{background:#ffcc00;border:none;padding:8px 15px;border-radius:20px}
.whatsapp-btn{background:#25D366;color:#fff;border:none;padding:8px 15px;border-radius:20px}

/* MENU */
.menu{position:absolute;top:8px;right:8px}
.menu-btn{cursor:pointer;font-size:1.5rem}
.menu-content{
  display:none;flex-direction:column;
  position:absolute;right:0;background:#fff;
  border-radius:5px;box-shadow:0 5px 10px rgba(0,0,0,.2)
}
.menu-content button{padding:8px;border:none;background:none;cursor:pointer}
.menu-content button:hover{background:#eee}

/* ADD BUTTON */
#add-order-btn{
  position:fixed;bottom:20px;right:20px;
  background:#ffcc00;border:none;
  padding:15px 20px;border-radius:50px;
  font-weight:bold;z-index:1000
}

/* MODAL */
.modal{
  display:none;position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.5);
  justify-content:center;align-items:center;z-index:2000
}
.modal-content{
  background:#fff;padding:20px;border-radius:10px;width:300px;position:relative
}
.modal-content input{width:100%;margin:5px 0;padding:8px}

/* FOOTER */
footer{text-align:center;background:#111;color:#fff;padding:15px;margin:20px;border-radius:10px}
</style>
</head>

<body>

<header>
  <h1>KD ONLINE SHOP</h1>
  <div class="header-subtext">A very valuable customer service from us.</div>
  <div class="search-container">
    <input type="text" placeholder="Search products...">
  </div>
</header>

<section class="products"></section>
<button id="add-order-btn">Add Product</button>

<!-- ORDER MODAL -->
<div id="order-modal" class="modal">
  <div class="modal-content">
    <h3 id="modal-name"></h3>
    <p id="modal-price"></p>
    <input id="order-name" placeholder="Your Name">
    <input id="order-address" placeholder="Address">
    <input id="order-phone" placeholder="Phone">
    <button id="send-btn" style="background:#25D366;color:#fff;width:100%;border:none;padding:8px">Send WhatsApp</button>
    <span onclick="closeOrder()" style="position:absolute;top:5px;right:10px;cursor:pointer">✖</span>
  </div>
</div>

<!-- ADD PRODUCT MODAL -->
<div id="add-modal" class="modal">
  <div class="modal-content">
    <h3>Add Product</h3>
    <input id="p-name" placeholder="Name">
    <input id="p-desc" placeholder="Description">
    <input id="p-price" placeholder="Price">
    <input id="p-img" placeholder="Image URL">
    <button onclick="addProduct()" style="background:#ffcc00;width:100%;border:none;padding:8px">Add</button>
    <span onclick="closeAdd()" style="position:absolute;top:5px;right:10px;cursor:pointer">✖</span>
  </div>
</div>

<footer>© 2025 KD ONLINE SHOP</footer>

<script>
const PASSWORD="Kkkqqq";
const STORAGE="kd_products";
const WHATSAPP="94755997160";
const DEFAULT_IMG="https://via.placeholder.com/400x250";

function checkPassword(){return prompt("Password:")==PASSWORD;}

function saveProducts(){
  const arr=[];
  document.querySelectorAll(".product-card").forEach(c=>{
    arr.push({
      name:c.querySelector("h3").textContent,
      desc:c.querySelector(".desc").textContent,
      price:c.querySelector(".product-price").dataset.price,
      img:c.querySelector("img").src
    });
  });
  localStorage.setItem(STORAGE,JSON.stringify(arr));
}

function createProduct(n,d,p,i,save=true){
  const card=document.createElement("div");
  card.className="product-card";
  card.innerHTML=`
  <div class="menu">
    <span class="menu-btn">⋮</span>
    <div class="menu-content">
      <button class="edit">Edit</button>
      <button class="del">Delete</button>
    </div>
  </div>
  <img src="${i||DEFAULT_IMG}">
  <div class="product-info">
    <h3>${n}</h3>
    <p class="desc">${d}</p>
    <p class="product-price" data-price="${p}">LKR ${p}</p>
    <div class="btn-container">
      <button class="order-btn">Order</button>
      <button class="whatsapp-btn">WhatsApp</button>
    </div>
  </div>`;
  document.querySelector(".products").appendChild(card);

  card.querySelector(".menu-btn").onclick=e=>{
    e.stopPropagation();
    card.querySelector(".menu-content").style.display="flex";
  };

  card.querySelector(".edit").onclick=()=>{
    if(!checkPassword())return;
    card.querySelector("h3").textContent=prompt("Name:",n);
    saveProducts();
  };

  card.querySelector(".del").onclick=()=>{
    if(!checkPassword())return;
    card.remove();saveProducts();
  };

  card.querySelector(".order-btn").onclick=()=>{
    document.getElementById("modal-name").textContent=n;
    document.getElementById("modal-price").textContent="LKR "+p;
    document.getElementById("order-modal").style.display="flex";
    document.getElementById("send-btn").onclick=()=>{
      const msg=`Product: ${n}\nPrice: ${p}`;
      window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`);
    };
  };

  card.querySelector(".whatsapp-btn").onclick=()=>{
    window.open(`https://wa.me/${WHATSAPP}?text=Order ${n}`);
  };

  if(save)saveProducts();
}

function loadDefault(){
  if(localStorage.getItem(STORAGE)) return;

  createProduct("Men T-Shirt","Cotton T-shirt",2500,"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab",false);
  createProduct("Ladies Bag","Stylish bag",4500,"https://images.unsplash.com/photo-1584917865442-de89df76afd3",false);
  createProduct("Shoes","Running shoes",7500,"https://images.unsplash.com/photo-1542291026-7eec264c27ff",false);
  createProduct("Smart Watch","Bluetooth watch",8900,"https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b",false);

  saveProducts();
}

window.onload=()=>{
  loadDefault();
  JSON.parse(localStorage.getItem(STORAGE)||"[]")
    .forEach(p=>createProduct(p.name,p.desc,p.price,p.img,false));
};

document.querySelector(".search-container input").oninput=e=>{
  const v=e.target.value.toLowerCase();
  document.querySelectorAll(".product-card").forEach(c=>{
    c.style.display=c.innerText.toLowerCase().includes(v)?"":"none";
  });
};

document.getElementById("add-order-btn").onclick=()=>{
  if(checkPassword())document.getElementById("add-modal").style.display="flex";
};

function addProduct(){
  createProduct(
    p-name.value,p-desc.value,p-price.value,p-img.value
  );
  closeAdd();
}

function closeAdd(){document.getElementById("add-modal").style.display="none";}
function closeOrder(){document.getElementById("order-modal").style.display="none";}
</script>

</body>
</html>
